schema: '2.0'
stages:
  preprocess_data:
    cmd: python ./scripts/pipeline/preprocess_data.py
    deps:
    - path: ./data/raw_data
      hash: md5
      md5: 75905f20f0c20638a1bcdfbedd9d9692.dir
      size: 61448808
      nfiles: 10006
    - path: ./scripts/pipeline/preprocess_data.py
      hash: md5
      md5: 69551a90b68ffa70ee67a31845943457
      size: 2619
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./data/processed_data
      hash: md5
      md5: 8ce52e21acf41739f81490010730441a.dir
      size: 25283710
      nfiles: 10006
    - path: ./logs/train_pipeline.log
      hash: md5
      md5: defde25e984305a61f6c7e81f42c9375
      size: 249
  split_data:
    cmd: python ./scripts/pipeline/split_data.py
    deps:
    - path: ./data/processed_data
      hash: md5
      md5: 8ce52e21acf41739f81490010730441a.dir
      size: 25283710
      nfiles: 10006
    - path: ./scripts/pipeline/split_data.py
      hash: md5
      md5: 93347f75cd9f2b5173010ab9fa96015c
      size: 2912
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./artifacts/metadata/
      hash: md5
      md5: 20131a97c2437571800a7f91bec6ffa3.dir
      size: 415041
      nfiles: 3
  train_model:
    cmd: python ./scripts/pipeline/train.py
    deps:
    - path: ./artifacts/metadata
      hash: md5
      md5: 20131a97c2437571800a7f91bec6ffa3.dir
      size: 415041
      nfiles: 3
    - path: ./scripts/pipeline/cnnmodel.py
      hash: md5
      md5: 0b811022b4ccf9951d9a342742701ab1
      size: 1639
    - path: ./scripts/pipeline/load_dataset.py
      hash: md5
      md5: 2454c57a5b6587bbd443eeb5c1c38732
      size: 2626
    - path: ./scripts/pipeline/train.py
      hash: md5
      md5: 886c5618601b6098fce0f59757315780
      size: 8799
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./artifacts/metrics/confusion_matrix_train.png
      hash: md5
      md5: ad9305cf93f582f19aac396fcf1b6214
      size: 24592
    - path: ./artifacts/metrics/confusion_matrix_val.png
      hash: md5
      md5: 6fef7ae6ff9176fdc55a36c59afe4128
      size: 20093
    - path: ./artifacts/model.pth
      hash: md5
      md5: 8d03d8b48480f08e12b4891336abf15a
      size: 29955651
    - path: ./artifacts/run_id.txt
      hash: md5
      md5: c349faecf3d603e59ef0b1dca19fe1f6
      size: 32
  evaluate_model:
    cmd: python ./scripts/pipeline/evaluate.py
    deps:
    - path: ./artifacts/metadata/test.csv
      hash: md5
      md5: a83c2da9131dc12efbca09a9694bf987
      size: 41524
    - path: ./artifacts/model.pth
      hash: md5
      md5: 8d03d8b48480f08e12b4891336abf15a
      size: 29955651
    - path: ./artifacts/run_id.txt
      hash: md5
      md5: c349faecf3d603e59ef0b1dca19fe1f6
      size: 32
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./artifacts/metrics/confusion_matrix_test.png
      hash: md5
      md5: 90c9a96703cde0e5b254cac69671cfb6
      size: 20102
    - path: ./artifacts/metrics/metrics.json
      hash: md5
      md5: e597938250c185d98138533644aa4d54
      size: 203
