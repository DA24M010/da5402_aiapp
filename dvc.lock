schema: '2.0'
stages:
  preprocess_data:
    cmd: python ./scripts/pipeline/preprocess_data.py
    deps:
    - path: ./data/raw_data
      hash: md5
      md5: 9e79ce8e7c3ecabdaba65afa8818c703.dir
      size: 245462983
      nfiles: 40000
    - path: ./scripts/pipeline/preprocess_data.py
      hash: md5
      md5: 3360a2b44a50555ae76318fde453e300
      size: 2029
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./data/processed_data
      hash: md5
      md5: 4fb742a7dfd07d4f0d6198745c20656b.dir
      size: 100963429
      nfiles: 40000
    - path: ./logs
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  split_data:
    cmd: python ./scripts/pipeline/split_data.py
    deps:
    - path: ./data/processed_data
      hash: md5
      md5: 4fb742a7dfd07d4f0d6198745c20656b.dir
      size: 100963429
      nfiles: 40000
    - path: ./scripts/pipeline/split_data.py
      hash: md5
      md5: be2d51ff6a1f01a9becd16c43a3a702e
      size: 1868
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./artifacts/metadata/
      hash: md5
      md5: b3f741807f8f7700a95422f9d3031938.dir
      size: 1658791
      nfiles: 3
  train_model:
    cmd: python ./scripts/pipeline/train.py
    deps:
    - path: ./artifacts/metadata
      hash: md5
      md5: b3f741807f8f7700a95422f9d3031938.dir
      size: 1658791
      nfiles: 3
    - path: ./scripts/pipeline/cnnmodel.py
      hash: md5
      md5: 375842c4248dfbb092704f702c7d3c1e
      size: 3354
    - path: ./scripts/pipeline/load_dataset.py
      hash: md5
      md5: 6a0254cbd492cf59348419ee36c955f9
      size: 1457
    - path: ./scripts/pipeline/train.py
      hash: md5
      md5: a89ad4a96e721d8429d5e42019ed18b8
      size: 8509
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./artifacts/metrics/confusion_matrix_train.png
      hash: md5
      md5: 78c3eb93a5b71ddc248206328d80a2ee
      size: 25436
    - path: ./artifacts/metrics/confusion_matrix_val.png
      hash: md5
      md5: c0c1649031788b1d55b50b7e3fa72bb7
      size: 22798
    - path: ./artifacts/model.pth
      hash: md5
      md5: 4686f1fef6bfcc7ce35cc9a9ba679713
      size: 29955651
    - path: ./artifacts/run_id.txt
      hash: md5
      md5: ddc4fc57ca5a152091fa05bdf33c45a7
      size: 32
  evaluate_model:
    cmd: python ./scripts/pipeline/evaluate.py
    deps:
    - path: ./artifacts/metadata/test.csv
      hash: md5
      md5: 271a05e1a23c21ffd71f9d70a0de69e6
      size: 165831
    - path: ./artifacts/model.pth
      hash: md5
      md5: 4686f1fef6bfcc7ce35cc9a9ba679713
      size: 29955651
    - path: ./artifacts/run_id.txt
      hash: md5
      md5: ddc4fc57ca5a152091fa05bdf33c45a7
      size: 32
    - path: params.yaml
      hash: md5
      md5: f9b315bf6a9d68c6fcb4a66ae8e79a68
      size: 247
    outs:
    - path: ./artifacts/metrics/confusion_matrix_test.png
      hash: md5
      md5: d5d439aba6b0377ecf44a24e00e8cf98
      size: 23020
    - path: ./artifacts/metrics/metrics.json
      hash: md5
      md5: e18779cf0ad8c31188653ba2d4b1d3be
      size: 180
